<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--<head th:replace="layouts :: header">-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>PROTON</title>
    <script src="/js/jquery-3.5.0.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="/css/mdb.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="/css/style.css" rel="stylesheet">
    <!-- DataTables CSS -->
    <link href="/css/addons/datatables.min.css" rel="stylesheet">
    <!-- DataTables JS -->
    <script src="/js/addons/datatables.min.js" type="text/javascript"></script>

    <!-- DataTables Select CSS -->
    <link href="/css/addons/datatables-select.min.css" rel="stylesheet">
    <!-- DataTables Select JS -->
    <script src="/js/addons/datatables-select.min.js" type="text/javascript"></script>
    <!-- Bootstrap tooltips -->

    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <!--    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>-->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.colVis.min.js"></script>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/buttons/1.6.1/css/buttons.dataTables.min.css"/>
</head>

<body>

<nav th:replace="layouts :: navbar"></nav>

<hr>
<h3> Projects </h3>
<!--<h5 style="font-style: italic;" class="orange-text"> PRO TIP: Skorzystaj z wyszukiwarki (SEARCH), która szuka po każdej-->
<!--    kolumnie! Kliknij na projekt by zobaczyć szczegóły/edytować.</h5>-->
<hr>
<a th:href="@{/projects/new}" class="btn btn-primary btn-sm mb-3"> New Project </a>


<button id="ALL" class="btn btn-sm btn-amber btn-rounded" onclick="reset()">ALL</button>
<button id="CL" class="btn btn-sm btn-teal btn-rounded" onclick="filter('CL')">CL</button>
<button id="CNL" class="btn btn-sm btn-green btn-rounded" onclick="filter('CNL')">CNL</button>
<button id="VIG" class="btn btn-sm btn-red btn-rounded" onclick="filter('VIG')">VIG</button>
<button id="GENESIS" class="btn btn-sm btn-deep-purple btn-rounded" onclick="genesis()">GENESIS</button>
<button id="MORE" class="btn btn-sm btn-elegant btn-rounded" style="float: right;" onclick="more()">MORE COLUMNS
</button>
<button id="LESS" class="btn btn-sm btn-blue btn-rounded" style="float: right;" onclick="less()">LESS COLUMNS</button>
<!--<button id="RED" class="btn btn-sm btn-outline-red btn-rounded" style="float: right;"-->
<!--        onclick="location.href='https://www.youtube.com/watch?v=dQw4w9WgXcQ';">CZERWONY PRZYCISK-->
<!--</button>-->

<table id="dtBasicExample" class="table table-striped table-bordered table-sm table-hover" cellspacing="0" width="100%">

    <thead class="purple-gradient white-text">
    <tr>
        <th> Sap No</th>
        <th> Guardian</th>
        <th> Project</th>
        <th> Status</th>
        <th> Company</th>
        <th> Stream</th>
        <th> Project Manager</th>
        <th> Technical Manager</th>
        <th> Analyst</th>
        <th> Steering Committee Members</th>
        <th> Description</th>
        <th> Providers</th>
        <th> Initiative Notif. Date</th>
        <th> Kick Off</th>
        <th> Go-Live Planned</th>
        <th> Go-Live Final</th>
        <th> Proj. Closure</th>
        <th> Steering Committee / Mbm</th>
        <th> Depreciation Start Date</th>
        <th> Last Accepted Budget</th>
        <th> Cost Allocation Key</th>
        <th> Comments</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="project : ${projects}">
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="P+${project.sapNo}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.employees}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.name}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.status}"></a></td>
        <!--        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.company}"></a></td>-->
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.companies}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.genesis}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.projectManager}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.techManager}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.analyst}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.steeringCom}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.descriptionEn}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.externalProviders}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.inaugurationDate}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.kickOff}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.goLivePlanned}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.goLiveFinal}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.projectClosure}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.steeringComMeetings}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.depreciationStartDate}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.budget}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.costAllocationKey}"></a></td>
        <td><a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.comment}"></a></td>
    </tr>
    </tbody>
    <tfoot>
    <tr>
        <th> Sap No</th>
        <th> Guardian</th>
        <th> Project</th>
        <th> Status</th>
        <th> Company</th>
        <th> Stream</th>
        <th> Project Manager</th>
        <th> Technical Manager</th>
        <th> Analyst</th>
        <th> Steering Committee Members</th>
        <th> Description</th>
        <th> Providers</th>
        <th> Initiative Notif. Date</th>
        <th> Kick Off</th>
        <th> Go-Live Planned</th>
        <th> Go-Live Final</th>
        <th> Proj. Closure</th>
        <th> Steering Committee / Mbm</th>
        <th> Depreciation Start Date</th>
        <th> Last Accepted Budget</th>
        <th> Cost Allocation Key</th>
        <th> Comments</th>
    </tr>
    </tfoot>
</table>

<!--<div>-->
<!--    <h4> Current Projects </h4>-->
<!--    <table class="table table-bordered table-striped">-->
<!--        <thead class="thead-dark">-->
<!--        <tr>-->
<!--            <th> Project Name</th>-->
<!--            <th> Project Status</th>-->
<!--            <th> Project Link</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="project : ${projects}">-->
<!--            <td> <a th:href="@{/projects/edit(id=${project.projectId})}" th:text="${project.name}"></a> </td>-->
<!--            <td th:text="${project.status}">-->
<!--            <td> <a th:href="@{/projects/edit(id=${project.projectId})}">Project details</a> </td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--        </tbody>-->
<!--    </table>-->
<!--</div>-->


<!-- SCRIPTS -->
<!-- JQuery -->
<!--<script type="text/javascript" src="js/jquery.min.js"></script>-->
<!--"/js/jquery-3.5.0.min.js"-->

<script>

    function less() {
        $('#dtBasicExample').DataTable()
            .columns([8, 9, 10, 11, 14, 15, 16, 19, 17, 18, 20]).visible(false, false)
            .columns.adjust().draw();
    }

    function more() {
        $('#dtBasicExample').DataTable()
            .columns([8, 9, 10, 11, 14, 15, 16, 19, 17, 18, 20]).visible(true)
            .columns.adjust().draw();
    }

    function reset() {
        $('#dtBasicExample').DataTable()
            .columns()
            .search("")
            .draw();
    }

    function filter(value) {
        reset();
        $('#dtBasicExample').DataTable()
            .column(4)
            .search(value)
            .draw();
    }

    function genesis() {
        reset();
        $('#dtBasicExample').DataTable()
            .column(5)
            .search('^((?!NOT_GENESIS).)*$', true, false)
            .draw();
    }

    // function sortuj() {
    //     var column = "Company";
    //     var select = "CNL";
    //     // .appendTo($(column.footer()).empty())
    //
    //     var val = "CNL";
    //
    //     //     $.fn.dataTable.util.escapeRegex(
    //     //     $(this).val()
    //     // );
    //
    //     column
    //         .search(val ? '^' + val + '$' : '', true, false)
    //         .draw();
    // }

    // column.data().unique().sort().each(function (d, j) {
    //     select.append('<option value="' + d + '">' + d + '</option>')


    $(document).ready(function () {
        $('#dtBasicExample').DataTable({
            // "ordering" : true,
            // "filterEnabled" : true,
            "paging": false, // false to disable pagination (or any other option)
            // "searching" : true, // false to disable search (or any other option)
            // "scrollY":        300,
            // "scrollX":        true,
            // "scrollCollapse" : true,
            // "fixedColumns":   true
            // function () {
            //     this.api().columns().every(


            dom: 'Bfrtip',
            stateSave: true,
            columnDefs: [
                {
                    targets: 1,
                    className: 'noVis'
                }

            ],

            buttons: [
                'copyHtml5',
                {
                    extend: 'excelHtml5',
                    autoFilter: true,
                    sheetName: 'More Than ACE Export'
                },
                // 'csvHtml5',
                {
                    extend: 'colvis',
                    collectionLayout: 'fixed two-column'
                }
            ],

            initComplete: function () {
                this.api().columns().every(function () {
                    var column = this;
                    var search = $(`<input class="form-control form-control-sm" type="text" placeholder="Search">`)
                        .appendTo($(column.footer()).empty())
                        .on('change input', function () {
                            var val = $(this).val()

                            column
                                .search(val ? val : '', true, false)
                                .draw();
                        });
                });
            }

        });
        $('.dataTables_length').addClass('bs-select');
        // alert("co tam?");
        less();


    });

</script>

</body>
