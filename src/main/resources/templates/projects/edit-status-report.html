<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!--<head th:replace="layouts :: header">-->
<!-- Font Awesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
<!-- Bootstrap core CSS -->
<link href="/css/bootstrap.min.css" rel="stylesheet">
<!-- Material Design Bootstrap -->
<link href="/css/mdb.min.css" rel="stylesheet">
<!-- Your custom styles (optional) -->
<link href="/css/style.css" rel="stylesheet">
<!-- DataTables CSS -->
<link href="/css/addons/datatables.min.css" rel="stylesheet">
<!-- DataTables JS -->
<script src="/js/addons/datatables.min.js" type="text/javascript"></script>

<!-- DataTables Select CSS -->
<link href="/css/addons/datatables-select.min.css" rel="stylesheet">
<!-- DataTables Select JS -->
<script src="/js/addons/datatables-select.min.js" type="text/javascript"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="js/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="js/mdb.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<style>
    table, td, th {
        border: 1px solid #595959;
        border-collapse: collapse;
    }

    td, th {
        padding: 3px;
        width: 30px;
        height: 25px;
    }

    th {
        background: #f0e6cc;
    }

    .even {
        background: #fbf8f0;
    }

    .odd {
        background: #fefcf9;
    }
</style>

</head>

<body>

<nav th:replace="layouts :: navbar"></nav>

<hr>
<h3> PMO </h3>
<hr>
<a th:href="@{/employees/new}" class="btn btn-primary btn-sm mb-3"> New PMO </a>
<div class="row" style="width: 100vw; margin: 30px">

    <form th:action="@{/projects/{id}/psr/save(id=${project.projectId})}" th:object="${projectStatusReport}" method="POST">
        <div th:if="${errorMessage}">
            <div th:text="${errorMessage}" class="red-text"></div>
        </div>
        Month
        <select th:field="${projectStatusReport.month}">
            <option th:each="month : ${T(java.time.Month).values()}"
                    th:value="${month}"
                    th:text="${month.getValue()}">
            </option>
        </select>
        <input type="hidden" th:field="${projectStatusReport.psrId}">
        <input type="number" th:field="${projectStatusReport.year}" min="2020" max="2099" placeholder="year" required>

        <div class="column">
            <table class="table table-bordered table-striped">
                <tbody>
                <tr>
                    <td>PROJECT DESCRIPTION:</td>
                    <td colspan="2">COST (PLN)</td>
                    <td>PM:
                        <input type="text" th:field="${projectStatusReport.projectManager}"></td>
                </tr>
                <tr>
                    <td rowspan="6" th:text="${project.descriptionEn}"></td>
                    <td>REALIZED:</td>
                    <td>
                        <input type="number" th:field="${projectStatusReport.realizedBudget}">
                    </td>
                    <td rowspan="2">SCOPE
                        <select th:field="${projectStatusReport.scope}">
                            <option th:each="scope : ${T(pl.fc.app.enities.enums.ProjectState).values()}"
                                    th:value="${scope}"
                                    th:text="${scope}">
                            </option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>PLANNED:</td>
                    <td>
                        <input type="number" th:field="${projectStatusReport.plannedBudget}">
                    </td>
                </tr>
                <tr>
                    <td>FORECAST:</td>
                    <td>
                            <input type="number" th:field="${projectStatusReport.forecastBudget}">
                    </td>
                    <td rowspan="2">SCHEDULE
                        <select th:field="${projectStatusReport.schedule}">
                            <option th:each="schedule : ${T(pl.fc.app.enities.enums.ProjectState).values()}"
                                    th:value="${schedule}"
                                    th:text="${schedule}">
                            </option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">GO-LIVE DATE</td>
                </tr>
                <tr>
                    <td>FROM INAUGURATION:</td>
                    <td>
                        <a th:text="${project.goLivePlanned}"></a>
                    </td>
                    <td rowspan="2">COST
                        <select th:field="${projectStatusReport.cost}">
                            <option th:each="cost : ${T(pl.fc.app.enities.enums.ProjectState).values()}"
                                    th:value="${cost}"
                                    th:text="${cost}">
                            </option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>PLANNED:</td>
                    <td>
                        <input type="date" th:field="${projectStatusReport.projectInauguration}">
                    </td>
                </tr>
                <tr>
                    <td>WORKS COMPLETED
                        (last month)
                    </td>
                    <td colspan="3">
                        <textarea th:field="${projectStatusReport.completedWorks}"></textarea>
                    </td>
                </tr>
                <tr>
                    <td>NEXT STEPS
                        (next month)
                    </td>
                    <td colspan="3">
                        <textarea th:field="${projectStatusReport.nextSteps}"></textarea>
                    </td>
                </tr>
                <tr>
                    <td>ISSUES /RISKS &amp; MITIGATIONS</td>
                    <td colspan="3">
                        <textarea th:field="${projectStatusReport.risks}"></textarea>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    <button type="submit">Save PSR</button>
    </form>

    <div class="column">
        <h6> Current PSR </h6>
        <table class="table table-bordered table-striped" style="margin-left: 30px">
            <thead>
            <tr>
                <th> MONTH</th>
                <th> YEAR</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="psr : ${project.projectStatusReports}">
                <td> <a th:href="@{/projects/{id}/psr/{year}/{month}(id=${project.projectId}, month=${psr.month.getValue()}, year=${psr.year})}" th:text="${psr.month.getValue()}"></a></td>
                <td> <a th:href="@{/projects/{id}/psr/{year}/{month}(id=${project.projectId}, month=${psr.month.getValue()}, year=${psr.year})}" th:text="${psr.year}"></a></td>
            </tr>
            </tbody>
            </tbody>
        </table>
    </div>
</div>

</body>
